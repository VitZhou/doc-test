# 前端服务部署规范（试行）

该文档规定了前端生产环境发布的相关流程。

## 环境

目前确认工作环境有如下:
- dev: 开发环境
- sit: 系统内部集成测试(System Integration Testing)
- uat: 用户验收测试(User Acceptance Testing)
- prod: 生产

## 发布过程

### 代码仓库合并

根据团队git分支管理规范，由项目经理或项目leader负责合并需要上线的代码至`master`分支，并打上对应版本号tag。

### 准备回退包

虽然未必需要，但是提前备好可以防止出问题时手忙脚乱。

### 执行流水线

由项目经理或项目leader负责点击执行对应项目的生产环境流水线。

## 发布失败紧急回滚

若存在发布失败情况

有如下两种回退方法：
 
(1) 进入流水线的发布目录，下载前一版本构建包，解压后并上传到OBS。

(2) 从git仓库拉取前一tag版本代码，执行 `npm run build`，并上传相应打包出来的文件到OBS。

若需要前后端同时回退，则根据实际情况配合回退。